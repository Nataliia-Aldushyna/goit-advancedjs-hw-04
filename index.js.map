{"version":3,"file":"index.js","sources":["../src/js/lightbox.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/toast.js","../src/js/helpers.js","../src/js/refs.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction initLightbox() {\n  return new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport { initLightbox };","function getImagesMarkup(images) {\n    return images.hits\n      .map(\n        element =>\n          `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n          <img\n              class=\"gallery-image\"\n              src=\"${element.webformatURL}\"\n              alt=\"${element.tags}\"\n              />\n      </a>\n    <ul class=\"image-info\">\n     <li class=\"image-item-info\">\n          <span class=\"text-accent\">Likes</span>\n          <span class=\"text-comment\">${element.likes}</span>\n      </li>\n      <li class=\"image-item-info\">\n        <span class=\"text-accent\">Views</span>\n        <span class=\"text-comment\">${element.views}</span>\n      </li>\n      <li class=\"image-item-info\">\n        <span class=\"text-accent\">Comments</span>\n        <span class=\"text-comment\">${element.comments}</span>\n      </li>\n      <li class=\"image-item-info\">\n        <span class=\"text-accent\">Downloads</span>\n        <span class=\"text-comment\">${element.downloads}</span>\n      </li>\n    </ul>\n   \n  </li>`\n      )\n      .join('');\n  }\n  \n  function toggleLoadMoreButton(show, moreBtn, dataSearch = '') {\n    if (!show) {\n      moreBtn.classList.add('hide');\n      return;\n    }\n    moreBtn.classList.remove('hide');\n    moreBtn.dataset.search = dataSearch;\n  }\n  \n  function toggleSearchEndText(show, textEl) {\n    if (!show) {\n      textEl.classList.add('hide');\n      return;\n    }\n    textEl.classList.remove('hide');\n  }\n  \n  export { getImagesMarkup, toggleLoadMoreButton, toggleSearchEndText };","import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '46572597-f7ec836745a1e16eec9fbcb7b',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n});\n\nasync function searchImages(q, page = 1) {\n  const photos = await api.get('', { params: { q, page } });\n  console.log('axios', photos);\n  console.log('total', photos.data.total);\n  return photos.data;\n}\n\nexport { searchImages };","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction displayError() {\n  iziToast.error({\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    position: 'topRight',\n  });\n}\n\nfunction displayCriticalError() {\n  iziToast.error({\n    message: `Sorry, but something going wrong...!`,\n    position: 'topRight',\n  });\n}\n\nexport { displayError, displayCriticalError };","function isObjectsExists(total, page = 1, pp = 15) {\n    const calc = total - page * pp;\n    return calc > 1 ? true : false;\n  }\n  \n  function scrollScreen() {\n    const el = document.querySelector('.gallery');\n    const current = el.getBoundingClientRect();\n    setTimeout(() => {\n      window.scrollBy({\n        top: current.height * 2,\n        behavior: 'smooth',\n      });\n    }, 500);\n  }\n  \n  export { isObjectsExists, scrollScreen };","const refs = {\n    gallery: document.querySelector('.gallery'),\n    searchForm: document.getElementById('searchPhotoForm'),\n    loader: document.querySelector('.loader'),\n    loadMore: document.querySelector('.btn-more'),\n    searchEndText: document.querySelector('.text-search-end'),\n  };\n  \n  export { refs };","import { initLightbox } from './js/lightbox';\nimport {\n  getImagesMarkup,\n  toggleSearchEndText,\n  toggleLoadMoreButton,\n} from './js/render-functions';\nimport { searchImages } from './js/pixabay-api';\nimport { displayCriticalError, displayError } from './js/toast';\nimport { isObjectsExists, scrollScreen } from './js/helpers';\nimport { refs } from './js/refs';\nlet page = 1;\n\nrefs.searchForm.addEventListener('submit', handleSearchFormSubmit);\nrefs.loadMore.addEventListener('click', handleLoadMoreClick);\n\nconst lightbox = initLightbox();\n\nasync function handleSearchFormSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  const form = e.currentTarget;\n  const q = form.elements.q.value.trim();\n  toggleLoadMoreButton(false, refs.loadMore);\n  toggleSearchEndText(false, refs.searchEndText);\n  refs.loader.classList.remove('loader-off');\n  try {\n    const images = await searchImages(q);\n    refs.gallery.innerHTML = '';\n    if (images.totalHits === 0) {\n      displayError();\n      refs.loader.classList.add('loader-off');\n      return;\n    }\n\n    const imagesMarkup = getImagesMarkup(images);\n    refs.gallery.insertAdjacentHTML('beforeend', imagesMarkup);\n    lightbox.refresh();\n    if (isObjectsExists(images.totalHits)) {\n      toggleLoadMoreButton(true, refs.loadMore, q);\n    }\n    refs.loader.classList.add('loader-off');\n  } catch (error) {\n    console.error(e);\n    displayCriticalError();\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleLoadMoreClick(e) {\n  page += 1;\n  const q = e.currentTarget.dataset.search;\n  refs.loader.classList.remove('loader-off');\n  toggleLoadMoreButton(false, refs.loadMore);\n\n  try {\n    const images = await searchImages(q, page);\n    const imagesMarkup = getImagesMarkup(images);\n    refs.gallery.insertAdjacentHTML('beforeend', imagesMarkup);\n    lightbox.refresh();\n    if (isObjectsExists(images.totalHits, page)) {\n      toggleLoadMoreButton(true, refs.loadMore, q);\n    } else {\n      toggleSearchEndText(true, refs.searchEndText);\n    }\n    scrollScreen();\n  } catch {\n    console.error(e);\n    displayCriticalError();\n  }\n\n  refs.loader.classList.add('loader-off');\n}"],"names":["initLightbox","SimpleLightbox","getImagesMarkup","images","element","toggleLoadMoreButton","show","moreBtn","dataSearch","toggleSearchEndText","textEl","api","axios","searchImages","q","page","photos","displayError","iziToast","displayCriticalError","isObjectsExists","total","pp","scrollScreen","current","refs","handleSearchFormSubmit","handleLoadMoreClick","lightbox","e","form","imagesMarkup"],"mappings":"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"}